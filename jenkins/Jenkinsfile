pipeline {
    agent any
    stages {
        stage('pre_build')
        {
            steps {
                // dealing with permission denied error for accessing the socket
                sh 'chmod 777 /var/run/docker.sock'
            }
        }
        stage('build') {
            steps {
                sh "./build_full.sh"
            }
        }
    }
    post {
            always{
                xunit(
                  [CTest(deleteOutputFiles: true,
                        failIfNotNew: true,
                        pattern: 'build/Testing/**/Test.xml',
                        skipNoTestFiles: false,
                        stopProcessingIfError: true)]
                     )
        }
    }
}
